{% extends 'ui/base.html' %}
{% load static %}

{% block content %}
<input type="hidden" id="csrf_token" value="{{ csrf_token }}">
<!-- 아이콘 라이브러리 -->
<script src="https://unpkg.com/@phosphor-icons/web"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<!-- CSS 파일 연결 -->
<link rel="stylesheet" type="text/css" href="{% static 'ui/style.css' %}?v=9">

<h2 class="page-title">For Me, 지금의 나에게 어울리는 향은?</h2>

<div class="form-container" style="max-width: 1500px; margin: 0 auto; padding-bottom: 100px;">

    <!-- ================================================================== -->
    <!-- 1. 코디 섹션 -->
    <!-- ================================================================== -->
    <div class="section">
        <div class="section-title content-align">1. 코디(필수)</div>

        <!-- [BOX 1] 상의 & 하의 조합 -->
        <div id="group-2pc" class="clothing-box">
            <div class="box-label">상의 & 하의 조합</div>

            <!-- [A] 상의 -->
            <div class="outfit-row">
                <!-- 상의 종류 슬라이더 -->
                <div class="slider-wrapper">
                    <button class="nav-btn" onclick="moveSlider('outfit-top', -1)"><span class="material-icons">chevron_left</span></button>
                    <div class="slider-window">
                        <div class="slider-track" id="track-outfit-top" data-index="0">
                            <!-- data-value는 백엔드 map_item 키값과 일치해야 함 -->
                            <div class="outfit-item" onclick="selectOutfit(this)" data-type="top" data-value="blouse"><div class="icon-box"><img src="{% static 'ui/images/blouse.png' %}" alt="블라우스"></div><span>블라우스</span></div>
                            <div class="outfit-item" onclick="selectOutfit(this)" data-type="top" data-value="tshirt"><div class="icon-box"><img src="{% static 'ui/images/tshirt.png' %}" alt="티셔츠"></div><span>티셔츠</span></div>
                            <div class="outfit-item" onclick="selectOutfit(this)" data-type="top" data-value="knit"><div class="icon-box"><img src="{% static 'ui/images/knit.png' %}" alt="니트웨어"></div><span>니트웨어</span></div>
                            <div class="outfit-item" onclick="selectOutfit(this)" data-type="top" data-value="shirt"><div class="icon-box"><img src="{% static 'ui/images/shirt.png' %}" alt="셔츠"></div><span>셔츠</span></div>
                            <div class="outfit-item" onclick="selectOutfit(this)" data-type="top" data-value="sleeveless"><div class="icon-box"><img src="{% static 'ui/images/sleeveless.png' %}" alt="탑"></div><span>탑</span></div>
                            <div class="outfit-item" onclick="selectOutfit(this)" data-type="top" data-value="hoodie"><div class="icon-box"><img src="{% static 'ui/images/hoodie.png' %}" alt="후드티"></div><span>후드티</span></div>
                            <div class="outfit-item" onclick="selectOutfit(this)" data-type="top" data-value="bratop"><div class="icon-box"><img src="{% static 'ui/images/bratop.png' %}" alt="브라탑"></div><span>브라탑</span></div>
                        </div>
                    </div>
                    <button class="nav-btn" onclick="moveSlider('outfit-top', 1)"><span class="material-icons">chevron_right</span></button>
                </div>

                <!-- 상의 미리보기 -->
                <div class="preview-container" id="preview-top">
                    <div class="preview-box">Img</div>
                    <div class="preview-box">Img</div>
                    <div class="preview-box">Img</div>
                    <div class="preview-box">Img</div>
                    <span class="material-icons refresh-icon" data-target="top">cached</span>
                </div>
            </div>

            <!-- 상의 색상 -->
            <div class="slider-wrapper color-slider-wrapper" style="margin-bottom: 20px;">
                <button class="nav-btn" onclick="moveSlider('color-top', -1)"><span class="material-icons">chevron_left</span></button>
                <div class="slider-window">
                    <div class="slider-track" id="track-color-top" data-index="0">
                        <div class="color-item" onclick="selectColor(this)" data-type="top" data-value="white"><div class="color-circle" style="background:#FFFFFF;"></div><span>화이트</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="top" data-value="black"><div class="color-circle" style="background:#000000;"></div><span>블랙</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="top" data-value="grey"><div class="color-circle" style="background:#808080;"></div><span>그레이</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="top" data-value="navy"><div class="color-circle" style="background:#000080;"></div><span>네이비</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="top" data-value="beige"><div class="color-circle" style="background:#E1C699;"></div><span>베이지</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="top" data-value="pink"><div class="color-circle" style="background:#FFC0CB;"></div><span>핑크</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="top" data-value="skyblue"><div class="color-circle" style="background:#87CEEB;"></div><span>스카이블루</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="top" data-value="brown"><div class="color-circle" style="background:#8B4513;"></div><span>브라운</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="top" data-value="red"><div class="color-circle" style="background:#FF0000;"></div><span>레드</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="top" data-value="green"><div class="color-circle" style="background:#008000;"></div><span>그린</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="top" data-value="gold"><div class="color-circle" style="background:#FFD700;"></div><span>골드</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="top" data-value="silver"><div class="color-circle" style="background:#C0C0C0;"></div><span>실버</span></div>
                    </div>
                </div>
                <button class="nav-btn" onclick="moveSlider('color-top', 1)"><span class="material-icons">chevron_right</span></button>
            </div>

            <!-- [B] 하의 -->
            <div class="outfit-row">
                <!-- 하의 종류 슬라이더 -->
                <div class="slider-wrapper">
                    <button class="nav-btn" onclick="moveSlider('outfit-bottom', -1)"><span class="material-icons">chevron_left</span></button>
                    <div class="slider-window">
                        <div class="slider-track" id="track-outfit-bottom" data-index="0">
                            <div class="outfit-item" onclick="selectOutfit(this)" data-type="bottom" data-value="pants"><div class="icon-box"><img src="{% static 'ui/images/pants.png' %}" alt="팬츠"></div><span>팬츠</span></div>
                            <div class="outfit-item" onclick="selectOutfit(this)" data-type="bottom" data-value="jeans"><div class="icon-box"><img src="{% static 'ui/images/jeans.png' %}" alt="청바지"></div><span>청바지</span></div>
                            <div class="outfit-item" onclick="selectOutfit(this)" data-type="bottom" data-value="skirt"><div class="icon-box"><img src="{% static 'ui/images/skirt.png' %}" alt="스커트"></div><span>스커트</span></div>
                            <div class="outfit-item" onclick="selectOutfit(this)" data-type="bottom" data-value="leggings"><div class="icon-box"><img src="{% static 'ui/images/leggings.png' %}" alt="레깅스"></div><span>레깅스</span></div>
                            <div class="outfit-item" onclick="selectOutfit(this)" data-type="bottom" data-value="jogger"><div class="icon-box"><img src="{% static 'ui/images/jogger.png' %}" alt="조거팬츠"></div><span>조서팬츠</span></div>
                        </div>
                    </div>
                    <button class="nav-btn" onclick="moveSlider('outfit-bottom', 1)"><span class="material-icons">chevron_right</span></button>
                </div>

                <!-- 하의 미리보기 -->
                <div class="preview-container" id="preview-bottom">
                    <div class="preview-box">Img</div>
                    <div class="preview-box">Img</div>
                    <div class="preview-box">Img</div>
                    <div class="preview-box">Img</div>
                    <span class="material-icons refresh-icon" data-target="bottom">cached</span>
                </div>
            </div>

            <!-- 하의 색상 -->
            <div class="slider-wrapper color-slider-wrapper">
                <button class="nav-btn" onclick="moveSlider('color-bottom', -1)"><span class="material-icons">chevron_left</span></button>
                <div class="slider-window">
                    <div class="slider-track" id="track-color-bottom" data-index="0">
                        <div class="color-item" onclick="selectColor(this)" data-type="bottom" data-value="white"><div class="color-circle" style="background:#FFFFFF;"></div><span>화이트</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="bottom" data-value="black"><div class="color-circle" style="background:#000000;"></div><span>블랙</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="bottom" data-value="grey"><div class="color-circle" style="background:#808080;"></div><span>그레이</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="bottom" data-value="navy"><div class="color-circle" style="background:#000080;"></div><span>네이비</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="bottom" data-value="beige"><div class="color-circle" style="background:#E1C699;"></div><span>베이지</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="bottom" data-value="pink"><div class="color-circle" style="background:#FFC0CB;"></div><span>핑크</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="bottom" data-value="skyblue"><div class="color-circle" style="background:#87CEEB;"></div><span>스카이블루</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="bottom" data-value="brown"><div class="color-circle" style="background:#8B4513;"></div><span>브라운</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="bottom" data-value="red"><div class="color-circle" style="background:#FF0000;"></div><span>레드</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="bottom" data-value="green"><div class="color-circle" style="background:#008000;"></div><span>그린</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="bottom" data-value="gold"><div class="color-circle" style="background:#FFD700;"></div><span>골드</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="bottom" data-value="silver"><div class="color-circle" style="background:#C0C0C0;"></div><span>실버</span></div>
                    </div>
                </div>
                <button class="nav-btn" onclick="moveSlider('color-bottom', 1)"><span class="material-icons">chevron_right</span></button>
            </div>
        </div>

        <!-- [BOX 2] 원피스 -->
        <div id="group-1pc" class="clothing-box">
            <div class="box-label">원피스</div>
            <div class="split-layout">
                <div class="left-column">
                    <div class="slider-wrapper">
                        <button class="nav-btn" onclick="moveSlider('outfit-onepiece', -1)"><span class="material-icons">chevron_left</span></button>
                        <div class="slider-window">
                            <div class="slider-track" id="track-outfit-onepiece" data-index="0">
                                <div class="outfit-item" onclick="selectOutfit(this)" data-type="onepiece" data-value="dress"><div class="icon-box"><img src="{% static 'ui/images/dress.png' %}" alt="드레스"></div><span>드레스</span></div>
                                <div class="outfit-item" onclick="selectOutfit(this)" data-type="onepiece" data-value="jumpsuit"><div class="icon-box"><img src="{% static 'ui/images/jumpsuit.png' %}" alt="점프수트"></div><span>점프수트</span></div>
                            </div>
                        </div>
                        <button class="nav-btn" onclick="moveSlider('outfit-onepiece', 1)"><span class="material-icons">chevron_right</span></button>
                    </div>

                    <div class="slider-wrapper color-slider-wrapper">
                        <button class="nav-btn" onclick="moveSlider('color-onepiece', -1)"><span class="material-icons">chevron_left</span></button>
                        <div class="slider-window">
                            <div class="slider-track" id="track-color-onepiece" data-index="0">
                        <div class="color-item" onclick="selectColor(this)" data-type="onepiece" data-value="white"><div class="color-circle" style="background:#FFFFFF;"></div><span>화이트</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="onepiece" data-value="black"><div class="color-circle" style="background:#000000;"></div><span>블랙</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="onepiece" data-value="grey"><div class="color-circle" style="background:#808080;"></div><span>그레이</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="onepiece" data-value="navy"><div class="color-circle" style="background:#000080;"></div><span>네이비</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="onepiece" data-value="beige"><div class="color-circle" style="background:#E1C699;"></div><span>베이지</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="onepiece" data-value="pink"><div class="color-circle" style="background:#FFC0CB;"></div><span>핑크</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="onepiece" data-value="skyblue"><div class="color-circle" style="background:#87CEEB;"></div><span>스카이블루</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="onepiece" data-value="brown"><div class="color-circle" style="background:#8B4513;"></div><span>브라운</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="onepiece" data-value="red"><div class="color-circle" style="background:#FF0000;"></div><span>레드</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="onepiece" data-value="green"><div class="color-circle" style="background:#008000;"></div><span>그린</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="onepiece" data-value="gold"><div class="color-circle" style="background:#FFD700;"></div><span>골드</span></div>
                        <div class="color-item" onclick="selectColor(this)" data-type="onepiece" data-value="silver"><div class="color-circle" style="background:#C0C0C0;"></div><span>실버</span></div>
                            </div>
                        </div>
                        <button class="nav-btn" onclick="moveSlider('color-onepiece', 1)"><span class="material-icons">chevron_right</span></button>
                    </div>
                </div>

                <div class="preview-container" id="preview-onepiece">
                    <div class="preview-box">Img</div>
                    <div class="preview-box">Img</div>
                    <div class="preview-box">Img</div>
                    <div class="preview-box">Img</div>
                    <span class="material-icons refresh-icon" data-target="onepiece">cached</span>
                </div>
            </div>
        </div>
    </div>

    <!-- 2. 계절 -->
    <div class="section content-align">
        <div class="section-title">2. 계절(필수)</div>
        <div class="btn-group" id="season-group">
            <button class="selection-btn" onclick="toggleSingle(this)" data-value="spring">봄</button>
            <button class="selection-btn" onclick="toggleSingle(this)" data-value="summer">여름</button>
            <button class="selection-btn" onclick="toggleSingle(this)" data-value="fall">가을</button>
            <button class="selection-btn" onclick="toggleSingle(this)" data-value="winter">겨울</button>
        </div>
    </div>

    <!-- 3. 비선호 취향 -->
    <div class="section content-align">
        <div class="section-title">3. 비선호 취향 (선택)</div>
        <div class="btn-group" id="accord-group">
            <button class="selection-btn" onclick="toggleMulti(this)" data-value="citrus">시트러스</button>
            <button class="selection-btn" onclick="toggleMulti(this)" data-value="woody">우디</button>
            <button class="selection-btn" onclick="toggleMulti(this)" data-value="floral">플로럴</button>
            <button class="selection-btn" onclick="toggleMulti(this)" data-value="musk">머스크</button>
        </div>
    </div>

    <div class="submit-container">
        <button class="submit-btn" onclick="submitSelection()">완료</button>
    </div>
</div>

<!-- ================================================================== -->
<!-- JavaScript (API 연동 핵심 및 에러 해결) -->
<!-- ================================================================== -->
<script>
    // 1. 선택 상태 저장용 객체
    const selections = {
        top: { item: null, color: null },
        bottom: { item: null, color: null },
        onepiece: { item: null, color: null }
    };

    // 2. 슬라이더 이동
    function moveSlider(trackId, direction) {
        const track = document.getElementById('track-' + trackId);
        if(!track) return;

        const isColor = trackId.includes('color');
        const step = isColor ? 65 : 100;
        const visibleCount = isColor ? 5 : 3;

        const items = track.children;
        const totalItems = items.length;
        let currentIndex = parseInt(track.getAttribute('data-index'));
        let newIndex = currentIndex + direction;

        const maxIndex = totalItems - visibleCount;
        if (newIndex < 0) newIndex = 0;
        if (newIndex > maxIndex && maxIndex > 0) newIndex = maxIndex;

        track.style.transform = `translateX(-${newIndex * step}px)`;
        track.setAttribute('data-index', newIndex);
    }

    // 3. 그룹 활성화/비활성화
    function updateGroupState(clickedType) {
        const group2pc = document.getElementById('group-2pc');
        const group1pc = document.getElementById('group-1pc');

        if (clickedType === 'top' || clickedType === 'bottom') {
            group1pc.classList.add('disabled');
            group2pc.classList.remove('disabled');
            selections.onepiece = { item: null, color: null };
            group1pc.querySelectorAll('.selected').forEach(el => el.classList.remove('selected'));
            document.getElementById('preview-onepiece').querySelectorAll('.preview-box').forEach(b => b.innerHTML = 'Img');

        } else if (clickedType === 'onepiece') {
            group2pc.classList.add('disabled');
            group1pc.classList.remove('disabled');
            selections.top = { item: null, color: null };
            selections.bottom = { item: null, color: null };
            group2pc.querySelectorAll('.selected').forEach(el => el.classList.remove('selected'));
            document.getElementById('preview-top').querySelectorAll('.preview-box').forEach(b => b.innerHTML = 'Img');
            document.getElementById('preview-bottom').querySelectorAll('.preview-box').forEach(b => b.innerHTML = 'Img');
        }
    }

// 4. 옷 선택 (해제 시 그룹 잠금 풀기 기능 추가)
    function selectOutfit(element) {
        const type = element.getAttribute('data-type');
        const value = element.getAttribute('data-value');

        // [선택 해제 로직]
        if (element.classList.contains('selected')) {
            element.classList.remove('selected');
            selections[type].item = null;
            clearPreview(type);

            // ★ 핵심: 다 지워졌는지 확인하고 그룹 잠금 풀기
            checkAndResetGroups();
            return;
        }

        // [새로운 선택 로직]
        updateGroupState(type);

        const parent = element.parentElement;
        for (let item of parent.children) { item.classList.remove('selected'); }
        element.classList.add('selected');

        selections[type].item = value;
        fetchImages(type);
    }

    // 5. 색상 선택 (해제 시 그룹 잠금 풀기 기능 추가)
    function selectColor(element) {
        const type = element.getAttribute('data-type');
        const value = element.getAttribute('data-value');

        // [선택 해제 로직]
        if (element.classList.contains('selected')) {
            element.classList.remove('selected');
            selections[type].color = null;
            clearPreview(type);

            // ★ 핵심: 다 지워졌는지 확인하고 그룹 잠금 풀기
            checkAndResetGroups();
            return;
        }

        // [새로운 선택 로직]
        updateGroupState(type);

        const parent = element.parentElement;
        for (let item of parent.children) { item.classList.remove('selected'); }
        element.classList.add('selected');

        selections[type].color = value;
        fetchImages(type);
    }

    // 6. [API 호출 핵심] 헤더 추가로 에러 해결
    function fetchImages(category) {
        const item = selections[category].item;
        const color = selections[category].color;

        if (item && color) {
            let containerId;
            if (category === 'top') containerId = 'preview-top';
            else if (category === 'bottom') containerId = 'preview-bottom';
            else if (category === 'onepiece') containerId = 'preview-onepiece';

            const container = document.getElementById(containerId);

            // 백엔드 주소 (api/ 포함)
            const apiUrl = `/api/filter-images/?category=${category}&item=${item}&color=${color}`;

            console.log(`[Fetching] ${apiUrl}`);

            // Headers 옵션 추가 (JSON 강제 요청)
            fetch(apiUrl, {
                method: 'GET',
                headers: {
                    'Accept': 'application/json', // "나 HTML 말고 JSON 줘!" 라고 요청
                    'Content-Type': 'application/json'
                }
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json(); // 이제 여기서 에러가 안 날 겁니다!
            })
            .then(data => {
                console.log("[Data Received]", data); // 받은 데이터 콘솔 출력
                const boxes = container.getElementsByClassName('preview-box');

                Array.from(boxes).forEach((box, index) => {
                    box.innerHTML = '';
                    box.classList.remove('selected');

                    if (data.images && data.images[index]) {
                        const img = document.createElement('img');
                        img.src = data.images[index];
                        img.style.width = '100%';
                        img.style.height = '100%';
                        img.style.objectFit = 'cover';
                        img.style.borderRadius = '35px';

                        box.appendChild(img);

                        box.onclick = function() {
                            for(let b of boxes) b.classList.remove('selected');
                            this.classList.add('selected');
                        };
                    } else {
                        box.innerText = 'No Img';
                        box.style.color = '#ccc';
                    }
                });
            })
            .catch(err => {
                console.error('이미지 로딩 실패:', err);
            });
        }
    }

    // 7. 기타 UI 기능
    function toggleSingle(element) {
        const parent = element.parentElement;
        for (let btn of parent.children) {
            btn.classList.remove('active');
            btn.innerText = btn.innerText.replace('✓ ', '');
        }
        element.classList.add('active');
        element.innerText = '✓ ' + element.innerText;
    }

    function toggleMulti(element) {
        if (element.classList.contains('active')) {
            element.classList.remove('active');
            element.innerText = element.innerText.replace('✓ ', '');
        } else {
            element.classList.add('active');
            element.innerText = '✓ ' + element.innerText;
        }
    }

    document.querySelectorAll('.refresh-icon').forEach(icon => {
        icon.addEventListener('click', function() {
            const target = this.getAttribute('data-target');
            if (target) fetchImages(target);
            this.style.transform = 'rotate(180deg)';
            setTimeout(() => { this.style.transform = 'rotate(0deg)'; }, 400);
        });
    });

    // 8. 완료 버튼
    function submitSelection() {

    // ===============================
    // 1️⃣ 입력값 검증
    // ===============================
    const seasonBtn = document.querySelector('#season-group .active');
    const seasonValue = seasonBtn ? seasonBtn.getAttribute('data-value') : null;

    if (!seasonValue) {
        alert("계절을 선택해주세요!");
        return;
    }

    const is2pcComplete =
        selections.top.item &&
        selections.top.color &&
        selections.bottom.item &&
        selections.bottom.color;

    const is1pcComplete =
        selections.onepiece.item &&
        selections.onepiece.color;

    if (!is2pcComplete && !is1pcComplete) {
        alert("코디 정보를 모두 선택해주세요.");
        return;
    }

    const dislikeBtns = document.querySelectorAll('#accord-group .active');
    const dislikes = Array.from(dislikeBtns).map(btn =>
        btn.getAttribute('data-value')
    );

    const requestData = {
        season: seasonValue,
        disliked_accords: dislikes,
        top: selections.top.item,
        top_color: selections.top.color,
        bottom: selections.bottom.item,
        bottom_color: selections.bottom.color,
        onepiece: selections.onepiece.item,
        onepiece_color: selections.onepiece.color
    };

    const csrfToken = document.getElementById('csrf_token').value;

    // ===============================
    // 2️⃣ 사용자 입력 저장
    // ===============================
    fetch('/api/user-input/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'Accept': 'application/json',
            'X-CSRFToken': csrfToken
        },
        body: JSON.stringify(requestData)
    })
    .then(response => {
        if (!response.ok) {
            return response.json().then(err => { throw err; });
        }
        return response.json();
    })
    .then(data => {
        console.log("저장 성공! User ID:", data.user_id);

        const userId = data.user_id;

        // ===============================
        // 3️⃣ 추천 API 호출 (DB 저장 발생)
        // ===============================
        return fetch(`/api/recommend/?user_id=${userId}`);
    })
    .then(res => res.json())
    .then(result => {
        console.log("추천 완료:", result);

        // ===============================
        // 4️⃣ 결과 페이지 이동
        // ===============================
        window.location.href = "{% url 'result' %}";
    })
    .catch(error => {
        console.error('오류 발생:', error);
        alert("처리 중 오류가 발생했습니다. 콘솔을 확인하세요.");
    });
}
</script>
{% endblock %}